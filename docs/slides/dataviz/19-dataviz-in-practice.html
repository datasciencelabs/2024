<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="dcterms.date" content="2024-10-09">
  <meta name="keywords" content="Data Visualization">
  <title>BST 260: Introduction to Data Science – Dataviz In Practice</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Dataviz In Practice</h1>

<div class="quarto-title-authors">
</div>

  <p class="date">2024-10-09</p>
</section>
<section id="data-visualization-in-practice" class="slide level2">
<h2>Data visualization in practice</h2>
<ul>
<li><p>In this chapter, we will demonstrate how relatively simple <strong>ggplot2</strong> code can create insightful and aesthetically pleasing plots.</p></li>
<li><p>As motivation we will create plots that help us better understand trends in world health and economics.</p></li>
<li><p>As we go through our case study, we will describe relevant general data visualization principles and learn concepts such as <em>faceting</em>, <em>time series plots</em>, <em>transformations</em>, and <em>ridge plots</em>.</p></li>
</ul>
</section>
<section id="case-study-1" class="slide level2">
<h2>Case study 1</h2>
<ul>
<li><p><a href="https://en.wikipedia.org/wiki/Hans_Rosling">Hans Rosling</a> was the co-founder of the <a href="http://www.gapminder.org/">Gapminder Foundation</a>, an organization dedicated to educating the public by using data to dispel common myths about the so-called developing world.</p></li>
<li><p>The organization uses data to show how actual trends in health and economics contradict the narratives that emanate from sensationalist media coverage of catastrophes, tragedies, and other unfortunate events.</p></li>
</ul>
</section>
<section id="case-study-1-1" class="slide level2">
<h2>Case study 1</h2>
<ul>
<li>As stated in the Gapminder Foundation’s website:</li>
</ul>
<blockquote>
<p>Journalists and lobbyists tell dramatic stories. That’s their job. They tell stories about extraordinary events and unusual people. The piles of dramatic stories pile up in peoples’ minds into an over-dramatic worldview and strong negative stress feelings: “The world is getting worse!”, “It’s we vs them!”, “Other people are strange!”, “The population just keeps growing!” and “Nobody cares!”.</p>
</blockquote>
</section>
<section id="case-study-1-2" class="slide level2">
<h2>Case study 1</h2>
<ul>
<li><p>This talk is based on two talks by Hans Rosling, one on <a href="https://www.ted.com/talks/hans_rosling_reveals_new_insights_on_poverty?language=en">education</a> and <a href="https://www.ted.com/talks/hans_rosling_reveals_new_insights_on_poverty?language=en">The Best Stats You’ve Ever Seen</a></p></li>
<li><p>We use data to attempt to answer the following two questions:</p>
<ol type="1">
<li><p>Is it a fair characterization of today’s world to say it is divided into western rich nations and the developing world in Africa, Asia, and Latin America?</p></li>
<li><p>Has income inequality across countries worsened during the last 40 years?</p></li>
</ol></li>
</ul>
</section>
<section id="case-study-1-3" class="slide level2">
<h2>Case study 1</h2>
<ul>
<li>To answer these questions, we will be using the <code>gapminder</code> dataset provided in <strong>dslabs</strong>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb1-2"><a></a><span class="fu">library</span>(dslabs) </span>
<span id="cb1-3"><a></a><span class="fu">ds_theme_set</span>()</span>
<span id="cb1-4"><a></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb1-5"><a></a>gapminder <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  country    year infant_mortality life_expectancy fertility population      gdp
  &lt;fct&gt;     &lt;int&gt;            &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
1 Albania    1960            115.             62.9      6.19    1636054 NA      
2 Algeria    1960            148.             47.5      7.65   11124892  1.38e10
3 Angola     1960            208              36.0      7.32    5270844 NA      
4 Antigua …  1960             NA              63.0      4.43      54681 NA      
5 Argentina  1960             59.9            65.4      3.11   20619075  1.08e11
6 Armenia    1960             NA              66.9      4.55    1867396 NA      
# ℹ 2 more variables: continent &lt;fct&gt;, region &lt;fct&gt;</code></pre>
</div>
</div>
</section>
<section id="case-study-1-4" class="slide level2">
<h2>Case study 1</h2>
<ul>
<li><p>As done in the <em>New Insights on Poverty</em> video, we start by testing our knowledge.</p></li>
<li><p>Which country do you think had the highest child mortality rates in 2015?</p>
<ol type="1">
<li><p>Sri Lanka or Turkey.</p></li>
<li><p>Poland or South Korea.</p></li>
<li><p>Malaysia or Russia.</p></li>
<li><p>Pakistan or Vietnam.</p></li>
<li><p>Thailand or South Africa.</p></li>
</ol></li>
</ul>
</section>
<section id="case-study-1-5" class="slide level2">
<h2>Case study 1</h2>
<p>Here is the data:</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped caption-top" data-quarto-postprocess="true" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">inf_mort</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">inf_mort</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Sri Lanka</td>
<td style="text-align: right;">8.4</td>
<td style="text-align: left;">Turkey</td>
<td style="text-align: right;">11.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Poland</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: left;">South Korea</td>
<td style="text-align: right;">2.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Malaysia</td>
<td style="text-align: right;">6.0</td>
<td style="text-align: left;">Russia</td>
<td style="text-align: right;">8.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Pakistan</td>
<td style="text-align: right;">65.8</td>
<td style="text-align: left;">Vietnam</td>
<td style="text-align: right;">17.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Thailand</td>
<td style="text-align: right;">10.5</td>
<td style="text-align: left;">South Africa</td>
<td style="text-align: right;">33.6</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="scatterplots" class="slide level2">
<h2>Scatterplots</h2>
<ul>
<li>We start by looking at data from about 50 years ago, when perhaps this view was first cemented in our minds.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">filter</span>(gapminder, year <span class="sc">==</span> <span class="dv">1962</span>) <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, life_expectancy)) <span class="sc">+</span> </span>
<span id="cb3-3"><a></a>  <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="scatterplots-1" class="slide level2">
<h2>Scatterplots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/fertility-versus-life-expectancy-1962-run-1.png" width="960" class="r-stretch"></section>
<section id="scatterplots-2" class="slide level2">
<h2>Scatterplots</h2>
<ul>
<li>To confirm that indeed these countries are from the regions we expect, we can use color to represent continent.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">filter</span>(gapminder, year <span class="sc">==</span> <span class="dv">1962</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(fertility, life_expectancy, <span class="at">color =</span> continent)) <span class="sc">+</span> </span>
<span id="cb4-3"><a></a>  <span class="fu">geom_point</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="scatterplots-3" class="slide level2">
<h2>Scatterplots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/fertility-versus-life-expectancy-1962-with-color-run-1.png" width="960" class="r-stretch"></section>
<section id="faceting" class="slide level2">
<h2>Faceting</h2>
<ul>
<li>To make comparisons, however, side by side plots are preferable.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">filter</span>(gapminder, year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, life_expectancy, <span class="at">col =</span> continent)) <span class="sc">+</span> </span>
<span id="cb5-3"><a></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb5-4"><a></a>  <span class="fu">facet_grid</span>(year<span class="sc">~</span>continent) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="faceting-1" class="slide level2">
<h2>Faceting</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/fertility-versus-life-expectancy-facet-run-3-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="faceting-2" class="slide level2">
<h2>Faceting</h2>
<ul>
<li>In this case, there is just one variable and we use <code>.</code> to let facet know that we are not using a second variable:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="fu">filter</span>(gapminder, year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1962</span>, <span class="dv">2012</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, life_expectancy, <span class="at">col =</span> continent)) <span class="sc">+</span> </span>
<span id="cb6-3"><a></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb6-4"><a></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> year) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="faceting-3" class="slide level2">
<h2>Faceting</h2>
<p>This plot clearly shows that the majority of countries have moved from the <em>developing world</em> cluster to the <em>western world</em> one.</p>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/fertility-versus-life-expectancy-two-years-run-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="facet_wrap" class="slide level2">
<h2><code>facet_wrap</code></h2>
<p>The function <code>facet_wrap</code> permits automatically wrap the series of plots so that each display has viewable dimensions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" data-code-line-numbers="7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1962</span>, <span class="dv">1980</span>, <span class="dv">1990</span>, <span class="dv">2000</span>, <span class="dv">2012</span>) </span>
<span id="cb7-2"><a></a>continents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Europe"</span>, <span class="st">"Asia"</span>) </span>
<span id="cb7-3"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb7-4"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> continent <span class="sc">%in%</span> continents) <span class="sc">|&gt;</span> </span>
<span id="cb7-5"><a></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(fertility, life_expectancy, <span class="at">col =</span> continent)) <span class="sc">+</span> </span>
<span id="cb7-6"><a></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb7-7"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="facet_wrap-1" class="slide level2">
<h2><code>facet_wrap</code></h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/unnamed-chunk-2-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="faceting-4" class="slide level2">
<h2>Faceting</h2>
<ul>
<li><p>By default axes ranges are the same across panes.</p></li>
<li><p>We can make the axes adapt using <code>scales = "free"</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" data-code-line-numbers="7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1962</span>, <span class="dv">1980</span>, <span class="dv">1990</span>, <span class="dv">2000</span>, <span class="dv">2012</span>) </span>
<span id="cb8-2"><a></a>continents <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Europe"</span>, <span class="st">"Asia"</span>) </span>
<span id="cb8-3"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb8-4"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> continent <span class="sc">%in%</span> continents) <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a></a>  <span class="fu">ggplot</span>( <span class="fu">aes</span>(fertility, life_expectancy, <span class="at">col =</span> continent)) <span class="sc">+</span> </span>
<span id="cb8-6"><a></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb8-7"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year, <span class="at">scales =</span> <span class="st">"free"</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>You will notice that it is harder to see the pattern.</li>
</ul>
</section>
<section id="faceting-5" class="slide level2">
<h2>Faceting</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/fertility-versus-life-expectancy-five-years-2-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="gganimate" class="slide level2">
<h2>gganimate</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Code</a></li><li><a href="#tabset-1-2">Wrangle</a></li><li><a href="#tabset-1-3">Animation</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">library</span>(gganimate)</span>
<span id="cb9-2"><a></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span><span class="sc">:</span><span class="dv">2016</span>)</span>
<span id="cb9-3"><a></a>p <span class="ot">&lt;-</span> <span class="fu">filter</span>(gapminder, year <span class="sc">%in%</span> years <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(group) <span class="sc">&amp;</span> </span>
<span id="cb9-4"><a></a>              <span class="sc">!</span><span class="fu">is.na</span>(fertility) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(life_expectancy)) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a></a>  <span class="fu">mutate</span>(<span class="at">population_in_millions =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(fertility, <span class="at">y =</span> life_expectancy, <span class="at">col =</span> group, <span class="at">size =</span> population_in_millions)) <span class="sc">+</span></span>
<span id="cb9-7"><a></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb9-8"><a></a>  <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb9-9"><a></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> </span>
<span id="cb9-10"><a></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">85</span>)) <span class="sc">+</span> </span>
<span id="cb9-11"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">'Year: {frame_time}'</span>, </span>
<span id="cb9-12"><a></a>       <span class="at">x =</span> <span class="st">'Fertility rate (births per woman)'</span>, <span class="at">y =</span> <span class="st">'Life expectancy'</span>) <span class="sc">+</span></span>
<span id="cb9-13"><a></a>  <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb9-14"><a></a>  <span class="fu">ease_aes</span>(<span class="st">'linear'</span>)</span>
<span id="cb9-15"><a></a></span>
<span id="cb9-16"><a></a><span class="fu">animate</span>(p, <span class="at">end_pause =</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>west <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Western Europe"</span>,<span class="st">"Northern Europe"</span>,<span class="st">"Southern Europe"</span>,</span>
<span id="cb10-2"><a></a>          <span class="st">"Northern America"</span>,<span class="st">"Australia and New Zealand"</span>)</span>
<span id="cb10-3"><a></a></span>
<span id="cb10-4"><a></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb10-5"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">case_when</span>(</span>
<span id="cb10-6"><a></a>    region <span class="sc">%in%</span> west <span class="sc">~</span> <span class="st">"The West"</span>,</span>
<span id="cb10-7"><a></a>    region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Eastern Asia"</span>, <span class="st">"South-Eastern Asia"</span>) <span class="sc">~</span> <span class="st">"East Asia"</span>,</span>
<span id="cb10-8"><a></a>    region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Caribbean"</span>, <span class="st">"Central America"</span>, <span class="st">"South America"</span>) <span class="sc">~</span> <span class="st">"Latin America"</span>,</span>
<span id="cb10-9"><a></a>    continent <span class="sc">==</span> <span class="st">"Africa"</span> <span class="sc">&amp;</span> region <span class="sc">!=</span> <span class="st">"Northern Africa"</span> <span class="sc">~</span> <span class="st">"Sub-Saharan Africa"</span>,</span>
<span id="cb10-10"><a></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Others"</span>))</span>
<span id="cb10-11"><a></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb10-12"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">factor</span>(group, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">"Others"</span>, <span class="st">"Latin America"</span>, <span class="st">"East Asia"</span>,<span class="st">"Sub-Saharan Africa"</span>, <span class="st">"The West"</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-3">
<p><img data-src="https://rafalab.dfci.harvard.edu/dsbook-part-1/dataviz/intro-dataviz_files/figure-html/gampnider-example-plot-1.gif"></p>
</div>
</div>
</div>
</section>
<section id="time-series-plots" class="slide level2">
<h2>Time series plots</h2>
<p>Here is a trend plot of United States fertility rates:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb11-2"><a></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb11-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, fertility)) <span class="sc">+</span> </span>
<span id="cb11-4"><a></a>  <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-series-plots-1" class="slide level2">
<h2>Time series plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/fertility-time-series-plot-points-run-1.png" width="960" class="r-stretch"></section>
<section id="time-series-plots-2" class="slide level2">
<h2>Time series plots</h2>
<ul>
<li>When the points are regularly and densely spaced, as they are here, we create curves by joining the points with lines, to convey that these data are from a single series, here a country:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb12-2"><a></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb12-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, fertility)) <span class="sc">+</span> </span>
<span id="cb12-4"><a></a>  <span class="fu">geom_line</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-series-plots-3" class="slide level2">
<h2>Time series plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/fertility-time-series-plot-curve-run-1.png" width="960" class="r-stretch"></section>
<section id="time-series-plots-4" class="slide level2">
<h2>Time series plots</h2>
<ul>
<li>This is particularly helpful when we look at two countries.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"South Korea"</span>, <span class="st">"Germany"</span>) </span>
<span id="cb13-2"><a></a>gapminder <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> countries) <span class="sc">|&gt;</span>  </span>
<span id="cb13-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year,fertility)) <span class="sc">+</span> </span>
<span id="cb13-4"><a></a>  <span class="fu">geom_line</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-series-plots-5" class="slide level2">
<h2>Time series plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/wrong-time-series-plot-run-1.png" width="960" class="r-stretch"></section>
<section id="time-series-plots-6" class="slide level2">
<h2>Time series plots</h2>
<ul>
<li><p>This is <strong>not</strong> the plot that we want.</p></li>
<li><p>To let <code>ggplot</code> know that there are two curves that need to be made separately, we assign each point to a <code>group</code>, one for each country:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"South Korea"</span>,<span class="st">"Germany"</span>) </span>
<span id="cb14-2"><a></a>gapminder <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> countries <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(fertility)) <span class="sc">|&gt;</span>  </span>
<span id="cb14-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, fertility, <span class="at">group =</span> country)) <span class="sc">+</span> </span>
<span id="cb14-4"><a></a>  <span class="fu">geom_line</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-series-plots-7" class="slide level2">
<h2>Time series plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/time-series-two-curves-run-1.png" width="960" class="r-stretch"></section>
<section id="time-series-plots-8" class="slide level2">
<h2>Time series plots</h2>
<ul>
<li>But which line goes with which country? We can assign colors to make this distinction.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>countries <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"South Korea"</span>,<span class="st">"Germany"</span>) </span>
<span id="cb15-2"><a></a>gapminder <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> countries <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(fertility)) <span class="sc">|&gt;</span>  </span>
<span id="cb15-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year,fertility, <span class="at">col =</span> country)) <span class="sc">+</span> </span>
<span id="cb15-4"><a></a>  <span class="fu">geom_line</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-series-plots-9" class="slide level2">
<h2>Time series plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/fertility-time-series-plot-run-1.png" width="960" class="r-stretch"></section>
<section id="time-series-plots-10" class="slide level2">
<h2>Time series plots</h2>
<ul>
<li>We define a data table with the label locations and then use a second mapping just for these labels:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" data-code-line-numbers="4,5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">library</span>(geomtextpath) </span>
<span id="cb16-2"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb16-3"><a></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> countries) <span class="sc">|&gt;</span>  </span>
<span id="cb16-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, life_expectancy, <span class="at">col =</span> country, <span class="at">label =</span> country)) <span class="sc">+</span> </span>
<span id="cb16-5"><a></a>  <span class="fu">geom_textpath</span>() <span class="sc">+</span> </span>
<span id="cb16-6"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-series-plots-11" class="slide level2">
<h2>Time series plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/labels-better-than-legends-run-1.png" width="960" class="r-stretch"></section>
<section id="data-transformations" class="slide level2">
<h2>Data transformations</h2>
<ul>
<li><p>We now shift our attention to the the commonly held notion that wealth distribution across the world has become worse during the last decades.</p></li>
<li><p>When general audiences are asked if poor countries have become poorer and rich countries become richer, the majority answers yes.</p></li>
<li><p>By using stratification, histograms, smooth densities, and boxplots, we will be able to understand if this is in fact the case.</p></li>
<li><p>First we learn how transformations can sometimes help provide more informative summaries and plots.</p></li>
</ul>
</section>
<section id="data-transformations-1" class="slide level2">
<h2>Data transformations</h2>
<ul>
<li><p>GDP measures the market value of goods and services produced by a country in a year.</p></li>
<li><p>The GDP per person is often used as a rough summary of a country’s wealth.</p></li>
<li><p>Gapmider adjusts GDP values for inflation and represent current US dollars.</p></li>
<li><p>We divide this quantity by 365 to obtain the more interpretable measure <em>dollars per day</em>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span>   </span>
<span id="cb17-2"><a></a>  <span class="fu">mutate</span>(<span class="at">dollars_per_day =</span> gdp<span class="sc">/</span>population<span class="sc">/</span><span class="dv">365</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="log-transformation" class="slide level2">
<h2>Log transformation</h2>
<ul>
<li>Here is a histogram of per day incomes from 1970:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>past_year <span class="ot">&lt;-</span> <span class="dv">1970</span> </span>
<span id="cb18-2"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb18-3"><a></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span>  </span>
<span id="cb18-5"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="log-transformation-1" class="slide level2">
<h2>Log transformation</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/dollars-per-day-distribution-run-1.png" width="960" class="r-stretch"></section>
<section id="log-transformation-2" class="slide level2">
<h2>Log transformation</h2>
<ul>
<li><p>It might be more informative to quickly be able to see how many countries have average daily incomes of about $1 (extremely poor), $2 (very poor), $4 (poor), $8 (middle), $16 (well off), $32 (rich), $64 (very rich) per day.</p></li>
<li><p>Here is the distribution if we apply a log base 2 transform:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb19-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">log2</span>(dollars_per_day))) <span class="sc">+</span>  </span>
<span id="cb19-4"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="log-transformation-3" class="slide level2">
<h2>Log transformation</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/dollars-per-day-distribution-log-run-1.png" width="960" class="r-stretch"></section>
<section id="which-base" class="slide level2">
<h2>Which base?</h2>
<ul>
<li><p>In the dollars per day example, we used base 2 instead of base 10 because the resulting range is easier to interpret.</p></li>
<li><p>The range of the untransformed values is 0.327, 48.885.</p></li>
<li><p>In base 10, this turns into a range that includes very few integers: just 0 and 1.</p></li>
<li><p>With base 2, our range includes -2, -1, 0, 1, 2, 3, 4, and 5.</p></li>
</ul>
</section>
<section id="which-base-1" class="slide level2">
<h2>Which base?</h2>
<ul>
<li><p>It is easier to compute <span class="math inline">\(2^x\)</span> and <span class="math inline">\(10^x\)</span> when <span class="math inline">\(x\)</span> is an integer and between -10 and 10, so we prefer to have smaller integers in the scale.</p></li>
<li><p>Another consequence of a limited range is that choosing the binwidth is more challenging.</p></li>
<li><p>With log base 2, we know that a binwidth of 1 will translate to a bin with range <span class="math inline">\(x\)</span> to <span class="math inline">\(2x\)</span>.</p></li>
</ul>
</section>
<section id="which-base-2" class="slide level2">
<h2>Which base?</h2>
<ul>
<li>For an example in which base 10 makes more sense, consider population sizes:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb20-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">log10</span>(population))) <span class="sc">+</span> </span>
<span id="cb20-4"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"black"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="which-base-3" class="slide level2">
<h2>Which base?</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/population-histogram-log10-run-1.png" width="960" class="r-stretch"></section>
<section id="transform-values-or-scale" class="slide level2">
<h2>Transform values or scale?</h2>
<p>Suppose we define <span class="math inline">\(z = \log10(x)\)</span> and want to know what is the value of <span class="math inline">\(z\)</span> if we see it at the mark <code>^</code>:</p>
<p><code>----1----^----2--------3----</code>.</p>
<p>We know that the <span class="math inline">\(z\)</span> is about 1.5.</p>
<p>But what If the scales are logged, what value of <span class="math inline">\(x\)</span> marked by <code>^</code>?</p>
<p><code>----10---^---100------1000---</code></p>
<p>We need to compute <span class="math inline">\(10^{1.5}\)</span>, which is a bit of extra work.</p>
</section>
<section id="transform-values-or-scale-1" class="slide level2">
<h2>Transform values or scale?</h2>
<ul>
<li><p>However, the advantage of showing logged scales is that the original values are displayed in the plot, which are easier to interpret.</p></li>
<li><p>For example, we would see “32 dollars a day” instead of “5 log base 2 dollars a day”.</p></li>
</ul>
</section>
<section id="transform-values-or-scale-2" class="slide level2">
<h2>Transform values or scale?</h2>
<ul>
<li>To show logged sclaes, instead of logging the values first, we apply this layer:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb21-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span>  </span>
<span id="cb21-4"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb21-5"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="transform-values-or-scale-3" class="slide level2">
<h2>Transform values or scale?</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/dollars-per-day-log-scale-run-1.png" width="960" class="r-stretch"></section>
<section id="comparing-distributions" class="slide level2">
<h2>Comparing distributions</h2>
<ul>
<li>We reorder the regions by the median value and use a log scale.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb22-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a></a>  <span class="fu">mutate</span>(<span class="at">region =</span> <span class="fu">reorder</span>(region, dollars_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb22-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, region)) <span class="sc">+</span> </span>
<span id="cb22-5"><a></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb22-6"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="comparing-distributions-1" class="slide level2">
<h2>Comparing distributions</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/dollars-per-day-points-run-1.png" width="960" class="r-stretch"></section>
<section id="comparing-distributions-2" class="slide level2">
<h2>Comparing distributions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb23-2"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">case_when</span>( </span>
<span id="cb23-3"><a></a>    region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Western Europe"</span>, <span class="st">"Northern Europe"</span>,<span class="st">"Southern Europe"</span>,  </span>
<span id="cb23-4"><a></a>                    <span class="st">"Northern America"</span>,  </span>
<span id="cb23-5"><a></a>                  <span class="st">"Australia and New Zealand"</span>) <span class="sc">~</span> <span class="st">"West"</span>, </span>
<span id="cb23-6"><a></a>    region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Eastern Asia"</span>, <span class="st">"South-Eastern Asia"</span>) <span class="sc">~</span> <span class="st">"East Asia"</span>, </span>
<span id="cb23-7"><a></a>    region <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Caribbean"</span>, <span class="st">"Central America"</span>,  </span>
<span id="cb23-8"><a></a>                  <span class="st">"South America"</span>) <span class="sc">~</span> <span class="st">"Latin America"</span>, </span>
<span id="cb23-9"><a></a>    continent <span class="sc">==</span> <span class="st">"Africa"</span> <span class="sc">&amp;</span>  </span>
<span id="cb23-10"><a></a>      region <span class="sc">!=</span> <span class="st">"Northern Africa"</span> <span class="sc">~</span> <span class="st">"Sub-Saharan"</span>, </span>
<span id="cb23-11"><a></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Others"</span>)) <span class="sc">|&gt;</span>  </span>
<span id="cb23-12"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">factor</span>(group, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Others"</span>, <span class="st">"Latin America"</span>,  </span>
<span id="cb23-13"><a></a>                                          <span class="st">"East Asia"</span>, <span class="st">"Sub-Saharan"</span>, </span>
<span id="cb23-14"><a></a>                                          <span class="st">"West"</span>))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="boxplots" class="slide level2">
<h2>Boxplots</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb24-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gdp)) <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">reorder</span>(group, dollars_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb24-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(group, dollars_per_day)) <span class="sc">+</span> </span>
<span id="cb24-5"><a></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb24-6"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span> </span>
<span id="cb24-7"><a></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> </span>
<span id="cb24-8"><a></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))  </span>
<span id="cb24-9"><a></a>p </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="boxplots-1" class="slide level2">
<h2>Boxplots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/dollars-per-day-boxplot-run-1.png" width="960" class="r-stretch"></section>
<section id="boxplots-2" class="slide level2">
<h2>Boxplots</h2>
<ul>
<li><p>Boxplots have the limitation that by summarizing the data into five numbers, we might miss important characteristics of the data.</p></li>
<li><p>One way to avoid this is by showing the data.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="boxplots-3" class="slide level2">
<h2>Boxplots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/dollars-per-day-boxplot-with-data-run-1.png" width="960" class="r-stretch"></section>
<section id="ridge-plots" class="slide level2">
<h2>Ridge plots</h2>
<ul>
<li><p>Showing each individual point does not always reveal important characteristics of the distribution.</p></li>
<li><p>Boxplots help with this by providing a five-number summary, but this has limitations too.</p></li>
<li><p>For example, boxplots will not permit us to discover bimodal distributions.</p></li>
</ul>
</section>
<section id="ridge-plots-1" class="slide level2">
<h2>Ridge plots</h2>
<p>Here is an simulated example:</p>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/boxplot-dont-show-bimodal-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="ridge-plots-2" class="slide level2">
<h2>Ridge plots</h2>
<ul>
<li>Here is the income data shown above with boxplots but with a <em>ridge plot</em>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">library</span>(ggridges) </span>
<span id="cb26-2"><a></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb26-3"><a></a>  <span class="fu">filter</span>(year <span class="sc">==</span> past_year <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(dollars_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb26-4"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">reorder</span>(group, dollars_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb26-5"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, group)) <span class="sc">+</span>  </span>
<span id="cb26-6"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>)  </span>
<span id="cb26-7"><a></a>p  <span class="sc">+</span> <span class="fu">geom_density_ridges</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ridge-plots-3" class="slide level2">
<h2>Ridge plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/ridge-plot-run-1.png" width="960" class="r-stretch"></section>
<section id="ridge-plots-4" class="slide level2">
<h2>Ridge plots</h2>
<ul>
<li>If the number of data points is small enough, we can add them to the ridge plot using the following code:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>p <span class="sc">+</span> <span class="fu">geom_density_ridges</span>(<span class="at">jittered_points =</span> <span class="cn">TRUE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ridge-plots-5" class="slide level2">
<h2>Ridge plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/ridge-plot-with-points-run-1.png" width="960" class="r-stretch"></section>
<section id="ridge-plots-6" class="slide level2">
<h2>Ridge plots</h2>
<ul>
<li>To show data points, but without using jitter we can use the following code to add what is referred to as a <em>rug representation</em> of the data.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>p <span class="sc">+</span> <span class="fu">geom_density_ridges</span>(<span class="at">jittered_points =</span> <span class="cn">TRUE</span>,  </span>
<span id="cb28-2"><a></a>                        <span class="at">position =</span> <span class="fu">position_points_jitter</span>(<span class="at">height =</span> <span class="dv">0</span>), </span>
<span id="cb28-3"><a></a>                        <span class="at">point_shape =</span> <span class="st">'|'</span>, <span class="at">point_size =</span> <span class="dv">3</span>,  </span>
<span id="cb28-4"><a></a>                        <span class="at">point_alpha =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ridge-plots-7" class="slide level2">
<h2>Ridge plots</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/ridge-plot-with-rug-run-1.png" width="960" class="r-stretch"></section>
<section id="case-study-1-6" class="slide level2">
<h2>Case study 1</h2>
<p>We keep countries that exist both in 1970 and 2010:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>past_year <span class="ot">&lt;-</span> <span class="dv">1970</span> </span>
<span id="cb29-2"><a></a>present_year <span class="ot">&lt;-</span> <span class="dv">2010</span> </span>
<span id="cb29-3"><a></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(past_year, present_year) </span>
<span id="cb29-4"><a></a>country_list <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb29-5"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(present_year, past_year)) <span class="sc">|&gt;</span> </span>
<span id="cb29-6"><a></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span> </span>
<span id="cb29-7"><a></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(dollars_per_day)), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb29-8"><a></a>  <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb29-9"><a></a>  <span class="fu">pull</span>(country) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="case-study-1-7" class="slide level2">
<h2>Case study 1</h2>
<ul>
<li>We can compare the distributions using this code:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb30-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a></a>  <span class="fu">mutate</span>(<span class="at">west =</span> <span class="fu">ifelse</span>(group <span class="sc">==</span> <span class="st">"West"</span>, <span class="st">"West"</span>, <span class="st">"Developing"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span> </span>
<span id="cb30-5"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb30-6"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span>  </span>
<span id="cb30-7"><a></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> west) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="case-study-1-8" class="slide level2">
<h2>Case study 1</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/income-histogram-west-v-devel-run-1.png" width="960" class="r-stretch"></section>
<section id="case-study-1-9" class="slide level2">
<h2>Case study 1</h2>
<p>To see which specific regions improved the most, we can remake the boxplots we made above, but now adding the year 2010 and then using facet to compare the two years.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb31-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">reorder</span>(group, dollars_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(group, dollars_per_day)) <span class="sc">+</span> </span>
<span id="cb31-5"><a></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb31-6"><a></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb31-7"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span> </span>
<span id="cb31-8"><a></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> </span>
<span id="cb31-9"><a></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> year) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="case-study-1-10" class="slide level2">
<h2>Case study 1</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/income-histogram-by-region-run-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="case-study-1-11" class="slide level2">
<h2>Case study 1</h2>
<p>To add color:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb32-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">|&gt;</span> </span>
<span id="cb32-3"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">reorder</span>(group, dollars_per_day, <span class="at">FUN =</span> median),</span>
<span id="cb32-4"><a></a>         <span class="at">year =</span> <span class="fu">factor</span>(year)) <span class="sc">|&gt;</span> </span>
<span id="cb32-5"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(group, dollars_per_day, <span class="at">fill =</span> year)) <span class="sc">+</span> </span>
<span id="cb32-6"><a></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb32-7"><a></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb32-8"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span> </span>
<span id="cb32-9"><a></a>  <span class="fu">xlab</span>(<span class="st">""</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="case-study-1-12" class="slide level2">
<h2>Case study 1</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/income-histogram-west-v-devel-by-year-run-1.png" width="960" class="r-stretch"></section>
<section id="case-study-1-13" class="slide level2">
<h2>Case study 1</h2>
<p>Let’s start by noting that density plots for income distribution in 1970 and 2010 deliver the message that the gap is closing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb33-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">|&gt;</span> </span>
<span id="cb33-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day)) <span class="sc">+</span> </span>
<span id="cb33-4"><a></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"grey"</span>) <span class="sc">+</span>  </span>
<span id="cb33-5"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span>  </span>
<span id="cb33-6"><a></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> year) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="case-study-1-14" class="slide level2">
<h2>Case study 1</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/income-smooth-density-by-year-run-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="accessing-computed-variables" class="slide level2">
<h2>Accessing computed variables</h2>
<p>Use <code>after_stat</code> to access density.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a>p <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb34-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">|&gt;</span> </span>
<span id="cb34-3"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">ifelse</span>(group <span class="sc">==</span> <span class="st">"West"</span>, <span class="st">"West"</span>, <span class="st">"Developing"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb34-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, <span class="at">y =</span> <span class="fu">after_stat</span>(count), <span class="at">fill =</span> group)) <span class="sc">+</span> </span>
<span id="cb34-5"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.125</span>, <span class="dv">300</span>)) </span>
<span id="cb34-6"><a></a>p <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> <span class="fu">facet_grid</span>(year <span class="sc">~</span> .) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-computed-variables-1" class="slide level2">
<h2>Accessing computed variables</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/income-smooth-density-counts-run-1.png" width="960" class="r-stretch"></section>
<section id="changing-smoothness" class="slide level2">
<h2>Changing smoothness</h2>
<p>We can change the smoothness. We selected 0.75 after trying out several values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a>p <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">bw =</span> <span class="fl">0.75</span>) <span class="sc">+</span> <span class="fu">facet_grid</span>(year <span class="sc">~</span> .) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="19-dataviz-in-practice_files/figure-revealjs/income-smooth-density-counts-by-year-1.png" width="960" class="r-stretch"></section>
<section id="multiple-ridge-plot" class="slide level2">
<h2>Multiple ridge plot</h2>
<p>To visualize if any of the groups defined above are driving this we can quickly make a ridge plot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb36-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(dollars_per_day)) <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">reorder</span>(group, dollars_per_day, <span class="at">FUN =</span> median)) <span class="sc">|&gt;</span></span>
<span id="cb36-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, group)) <span class="sc">+</span>  </span>
<span id="cb36-5"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>) <span class="sc">+</span>  </span>
<span id="cb36-6"><a></a>  <span class="fu">geom_density_ridges</span>(<span class="at">bandwidth =</span> <span class="fl">1.5</span>) <span class="sc">+</span> </span>
<span id="cb36-7"><a></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> year) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="multiple-ridge-plot-1" class="slide level2">
<h2>Multiple ridge plot</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/ridge-plot-income-five-regions-run-1.png" width="960" class="r-stretch"></section>
<section id="stacking-densities" class="slide level2">
<h2>Stacking densities</h2>
<ul>
<li>Another way to achieve this is by stacking the densities on top of each other:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb37-2"><a></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">|&gt;</span> </span>
<span id="cb37-3"><a></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span> </span>
<span id="cb37-4"><a></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> population<span class="sc">/</span><span class="fu">sum</span>(population)<span class="sc">*</span><span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb37-5"><a></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-6"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, <span class="at">fill =</span> group)) <span class="sc">+</span> </span>
<span id="cb37-7"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.125</span>, <span class="dv">300</span>)) <span class="sc">+</span>  </span>
<span id="cb37-8"><a></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">bw =</span> <span class="fl">0.75</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span>  </span>
<span id="cb37-9"><a></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> .)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="stacking-densities-1" class="slide level2">
<h2>Stacking densities</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/income-smooth-density-counts-by-region-and-year-run-1.png" width="960" class="r-stretch"></section>
<section id="weighted-densities" class="slide level2">
<h2>Weighted densities</h2>
<p>Here we weigh the countries by size:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38" data-code-line-numbers="6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>gapminder <span class="sc">|&gt;</span>  </span>
<span id="cb38-2"><a></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> years <span class="sc">&amp;</span> country <span class="sc">%in%</span> country_list) <span class="sc">|&gt;</span> </span>
<span id="cb38-3"><a></a>  <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span> </span>
<span id="cb38-4"><a></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> population<span class="sc">/</span><span class="fu">sum</span>(population)<span class="sc">*</span><span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-5"><a></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb38-6"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollars_per_day, <span class="at">fill =</span> group, <span class="at">weight =</span> weight)) <span class="sc">+</span> </span>
<span id="cb38-7"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log2"</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.125</span>, <span class="dv">300</span>)) <span class="sc">+</span>  </span>
<span id="cb38-8"><a></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">bw =</span> <span class="fl">0.75</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span> </span>
<span id="cb38-9"><a></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> .)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="weighted-densities-1" class="slide level2">
<h2>Weighted densities</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/income-smooth-density-counts-by-region-year-weighted-2-1.png" width="960" class="r-stretch"></section>
<section id="the-ecological-fallacy" class="slide level2">
<h2>The ecological fallacy</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/ecological-fallacy-averages-1.png" width="960" class="r-stretch"></section>
<section id="show-the-data" class="slide level2">
<h2>Show the data</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/ecological-fallacy-all-data-1.png" width="960" class="r-stretch"></section>
<section id="case-study-2" class="slide level2">
<h2>Case study 2</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>the_disease <span class="ot">&lt;-</span> <span class="st">"Measles"</span> </span>
<span id="cb39-2"><a></a>dat <span class="ot">&lt;-</span> us_contagious_diseases <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a></a>  <span class="fu">filter</span>(<span class="sc">!</span>state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Hawaii"</span>,<span class="st">"Alaska"</span>) <span class="sc">&amp;</span> disease <span class="sc">==</span> the_disease) <span class="sc">|&gt;</span> </span>
<span id="cb39-4"><a></a>  <span class="fu">mutate</span>(<span class="at">rate =</span> count <span class="sc">/</span> population <span class="sc">*</span> <span class="dv">10000</span> <span class="sc">*</span> <span class="dv">52</span> <span class="sc">/</span> weeks_reporting) <span class="sc">|&gt;</span>  </span>
<span id="cb39-5"><a></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">reorder</span>(state, <span class="fu">ifelse</span>(year <span class="sc">&lt;=</span> <span class="dv">1963</span>, rate, <span class="cn">NA</span>),  </span>
<span id="cb39-6"><a></a>                         median, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="heatmaps" class="slide level2">
<h2>Heatmaps</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb40-2"><a></a>dat <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, state, <span class="at">fill =</span> rate)) <span class="sc">+</span> </span>
<span id="cb40-3"><a></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"grey50"</span>) <span class="sc">+</span> </span>
<span id="cb40-4"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="sc">+</span> </span>
<span id="cb40-5"><a></a>  <span class="fu">scale_fill_gradientn</span>(<span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">"Reds"</span>), <span class="at">trans =</span> <span class="st">"sqrt"</span>) <span class="sc">+</span> </span>
<span id="cb40-6"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1963</span>, <span class="at">col =</span> <span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb40-7"><a></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>   </span>
<span id="cb40-8"><a></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),  </span>
<span id="cb40-9"><a></a>        <span class="at">legend.position =</span> <span class="st">"bottom"</span>,  </span>
<span id="cb40-10"><a></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>)) <span class="sc">+</span> </span>
<span id="cb40-11"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> the_disease, <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="heatmaps-1" class="slide level2">
<h2>Heatmaps</h2>

<img data-src="19-dataviz-in-practice_files/figure-revealjs/vaccines-plot-run-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="using-position" class="slide level2">
<h2>Using position</h2>
<p>We will show each state and the avearge:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>avg <span class="ot">&lt;-</span> us_contagious_diseases <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a></a>  <span class="fu">filter</span>(disease <span class="sc">==</span> the_disease) <span class="sc">|&gt;</span> <span class="fu">group_by</span>(year) <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a></a>  <span class="fu">summarize</span>(<span class="at">us_rate =</span> <span class="fu">sum</span>(count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span>  </span>
<span id="cb41-4"><a></a>              <span class="fu">sum</span>(population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">*</span> <span class="dv">10000</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-position-1" class="slide level2">
<h2>Using position</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>dat <span class="sc">|&gt;</span>  </span>
<span id="cb42-2"><a></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(rate)) <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a></a>    <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb42-4"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(year, rate, <span class="at">group =</span> state),  <span class="at">color =</span> <span class="st">"grey50"</span>,  </span>
<span id="cb42-5"><a></a>            <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb42-6"><a></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(year, us_rate),  <span class="at">data =</span> avg, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb42-7"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"sqrt"</span>, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">25</span>, <span class="dv">125</span>, <span class="dv">300</span>)) <span class="sc">+</span>  </span>
<span id="cb42-8"><a></a>  <span class="fu">ggtitle</span>(<span class="st">"Cases per 10,000 by state"</span>) <span class="sc">+</span>  </span>
<span id="cb42-9"><a></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">""</span>) <span class="sc">+</span> </span>
<span id="cb42-10"><a></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1955</span>, <span class="at">y =</span> <span class="dv">50</span>),  </span>
<span id="cb42-11"><a></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(x, y, <span class="at">label =</span> <span class="st">"US average"</span>),  </span>
<span id="cb42-12"><a></a>            <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span>  </span>
<span id="cb42-13"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">1963</span>, <span class="at">col =</span> <span class="st">"blue"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-position-2" class="slide level2">
<h2>Using position</h2>


<img data-src="19-dataviz-in-practice_files/figure-revealjs/time-series-vaccines-plot-run-1.png" width="960" class="r-stretch"><div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("http:\/\/datasciencelabs\.github\.io\/2024");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>